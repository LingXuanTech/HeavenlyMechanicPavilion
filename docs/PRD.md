# 股票 Agents 监控大屏 PRD

> 最后更新: 2026-02-11
> 本版本基于仓库实际实现状态校准

## 1. 产品愿景

打造一个面向专业投资分析场景的多 Agent 金融情报系统，通过“发现 → 研究 → 辩论 → 风控 → 决策”链路，为用户提供可追踪、可解释、可迭代的分析结果。

## 2. 目标用户

1. **个人进阶投资者**：需要多维信息聚合与结构化决策建议。
2. **研究型团队/工作室**：需要可协作、可复盘、可自动化的分析工作流。
3. **策略验证用户**：关注回测、准确率追踪、风险评估。

## 3. 已实现产品范围（As-Is）

## 3.1 分析与决策

- 多 Agent 协作分析（分析师 + Bull/Bear 辩论 + 风险评估 + Trader 决策）
- L1/L2 分级分析
- SSE 实时推送分析过程
- 分析结果持久化与历史查询

## 3.2 市场与数据能力

- A 股特色：北向资金、龙虎榜、限售解禁、政策分析
- 宏观与跨资产：macro、cross_asset、央行文本分析
- 另类与扩展：supply_chain、vision、model_racing
- 多数据源路由与缓存降级策略

## 3.3 交易与研究辅助

- watchlist / portfolio / risk / backtest
- Portfolio 已支持：可配置周期与聚类阈值、权重感知分散度评分、快速体检 + 完整分析双路径
- Portfolio 前端已支持：等权/自定义权重、场景模板、权重预设保存/重命名/排序/导入导出、导入策略（合并/覆盖）
- Portfolio 可执行性增强：预设兼容性提示（覆盖率/缺失标的）、有效权重预览（Top1/Top2/HHI）、智能再平衡建议与一键应用
- 研究对话与记忆模块（chat + memory）
- news + news_aggregator + discover（Scout 发现）

## 3.4 平台能力

- 认证：JWT + OAuth + Passkey
- 配置：Prompt 管理、AI Provider 管理、系统设置
- 运维：健康检查、API 指标、任务队列、通知系统

## 4. 当前版本关键指标（实况）

| 指标 | 当前值 |
|---|---:|
| 后端端点处理器 | 240 |
| 后端服务模块 | 41 |
| 前端页面 | 14 |
| 前端组件 | 44 |
| 前端 hooks | 26 |
| 后端测试文件 | 39 |

## 5. 非功能需求

1. **可靠性**：核心 API 健康探针、任务状态可追踪、错误结构化输出。
2. **可维护性**：OpenAPI 类型生成、前后端分层清晰、Monorepo 统一任务编排。
3. **可扩展性**：支持 Redis 队列扩展 worker，支持子图灰度发布。
4. **可观测性**：健康报告 + API metrics + 结构化日志。
5. **安全性**：认证与密钥管理、生产环境启动配置校验。

## 6. 已识别的产品级问题

1. 部分文档与代码实际规模不一致（本次同步修正）。
2. `ai_config` 路由存在重复定义，影响 API 合约稳定性。
3. OpenAPI 默认拉取地址与当前后端默认地址不一致，影响类型同步体验。
4. 子图灰度逻辑已具备，但缺少面向产品的对外可视化对比与验收面板。

## 7. 下一版本（V1.1）产品目标

1. **稳定性提升**：修复 API 合约重复定义，统一 OpenAPI 类型链路。
2. **质量提升**：补齐 SSE 与任务队列模式的集成测试矩阵。
3. **可用性提升**：完善分析任务与用户关联、增强审计与追溯能力。
4. **运营能力提升**：补齐关键运维手册、故障回滚与发布检查清单。

> 详细执行路径见：`plans/next-iteration-plan.md`
