# 股票 Agents 监控大屏 PRD (Comprehensive Update)

## 1. 项目愿景
开发一个基于 **TradingAgents** 框架的专业级金融情报系统。通过编排一组专业、模块化的 AI Agent 团队，进行对抗性辩论、深度数据挖掘和实时联网搜索，为投资者提供从“发现机会”到“决策执行”的全链路支持，并以交易室监控大屏的形式直观展示。

## 2. 核心角色与 Agent 架构 (Modular Agents)
系统采用多 Agent 协作模式，每个 Agent 作为一个独立的节点运行在 LangGraph 编排层中：

### 2.1 🕵️ 发现者 (Scout Agent) - **Enhanced**
- **职责**：根据自然语言指令扫描市场。
- **能力**：**实时联网搜索 (DuckDuckGo/Google)**、语义理解、Ticker 自动验证与过滤。
- **场景**：响应“寻找今日因 AI 概念大涨的股票”等时效性需求。

### 2.2 🔍 分析师团队 (Analyst Team)
- **技术分析师**：K 线形态识别、指标计算（RSI, MACD 等）。
- **基本面分析师**：财报深度解析、估值模型、行业催化剂分析。
- **宏观分析师**：追踪美联储利率、GDP、CPI 等宏观指标对市场的传导影响。
- **舆情分析师 (SentimentAgent)**：监控 Reddit、Twitter 等社交媒体热度，捕捉散户情绪与逼空信号。
- **跨资产分析师 (CrossAssetAgent)**：监控黄金、原油、债市与股市的联动效应。

### 2.3 ⚔️ 研究员辩论 (Researcher Debate)
- **多方研究员 (Bull Agent)** & **空方研究员 (Bear Agent)**。
- **机制**：基于 Analyst 提供的报告进行对抗性辩论，消除 AI 幻觉，暴露潜在风险。

### 2.4 🛡️ 风险经理 (Risk Manager)
- **职责**：下行风险评估，拥有“一票否决权”。
- **输出**：0-10 风险评分、波动率评估、流动性预警。

### 2.5 👨‍💼 基金经理 (Fund Manager)
- **职责**：综合所有 Agent 输入（含用户反馈），做出最终决策。
- **输出**：信号（Strong Buy/Hold/Sell）、入场区间、止盈止损位。

### 2.6 📈 扩展角色 (Specialized Agents)
- **回测专家 (BacktestAgent)**：负责历史模拟，验证策略在过去 N 天的胜率。
- **组合管家 (PortfolioAgent)**：分析持仓相关性，提供个性化调仓建议。
- **执行助手 (ExecutionAgent)**：对接模拟盘/实盘 API，负责自动化下单与网格交易。
- **筹码追踪员 (WhaleWatcher)**：解析 13F、内部人交易及 L2 大单流向。

## 3. 核心功能需求

### 3.1 智能发现与搜索
- **实时联网**：支持基于实时新闻和社交热点的股票发现。
- **高频社交脉搏**：集成 Twitter/Reddit 实时流，捕捉秒级情绪波动。
- **政策映射**：自动关联各国立法、补贴政策对特定板块的影响。
- **产业链穿透**：自动关联产业链上下游风险（供应链知识图谱）。

### 3.2 深度分析与回测
- **对抗性分析**：多维度数据支撑的深度研报生成。
- **策略回测**：支持对 Agent 历史决策进行自动评分和胜率统计。
- **多模态解析**：利用 Vision 模型解析财报图表，利用 TTS/Whisper 处理电话会录音。
- **跨资产联动**：监控大宗商品、债市对股市的前导影响。

### 3.3 监控大屏与交互
- **实时工作流可视化**：展示 Agent 思考过程。
- **交互式决策**：用户可参与辩论投票，影响最终决策权重。
- **智能推送**：通过 Telegram/微信机器人推送重大信号；生成双人对话式播客研报。
- **Agentic UI**：根据分析结论动态生成前端组件。

## 4. 技术架构

### 4.1 后端 (Python)
- **核心**：FastAPI + LangGraph (StateGraph)。
- **存储**：SQLModel (关系型) + ChromaDB (向量记忆) + Redis (高性能缓存)。
- **搜索**：DuckDuckGo / Serper API。
- **观测**：LangSmith (Tracing & Eval)。

### 4.2 前端 (React)
- **框架**：React 19 + Vite + Tailwind CSS。
- **可视化**：TradingView Lightweight Charts + Recharts。
- **交互**：SSE (Server-Sent Events) 实时流。

## 5. 迭代实施计划 (Implementation Roadmap)

### 阶段 1: Scout Agent 联网能力增强 (P0)
- 集成搜索工具 (DuckDuckGo/Serper)。
- 优化 Query 理解与 Ticker 验证工作流。

### 阶段 2: 架构深度重构与工程化 (P1)
- 实现并行分析师节点执行。
- 全面采用 Structured Output (Pydantic)。
- 接入 LangSmith 可观测性与自动化评估。

### 阶段 3: 市场差异化与专家子图 (P2)
- A 股深度适配（政策分析、北向资金、龙虎榜）。
- 美/港股宏观对冲逻辑强化。

### 阶段 4: 数据底座加固 (P2)
- Redis 分布式缓存集成。
- 数据源鲁棒性与自动重试机制。

### 阶段 5: 信任、回测与舆情 (P3)
- 引入 `BacktestAgent` 与 `SentimentAgent`。
- 组合分析逻辑升级。

### 阶段 6: 智能进化与人机协同 (P4)
- Agent 自我反思与 Prompt 自动微调。
- 人机共创决策（论点修正、协作作战室）。

### 阶段 7: 前端体验升级 (P5)
- TradingView 图表集成。
- 流式 UI 响应与高保真 TTS。

## 6. 功能扩展蓝图 (Expansion Blueprint)

### 6.1 深度投研能力
- **回测系统**：历史回放、自动评分、Agent 排行榜。
- **多模态分析**：电话会录音转录、财报图表 Vision 识别。
- **另类数据**：专利监控、人才流向、AH 溢价套利。

### 6.2 风险与组合管理
- **个性化管家**：账户绑定、动态风控、相关性诊断。
- **机构级建模**：蒙特卡洛模拟、压力测试、VaR 预测。
- **筹码追踪**：13F 机构持仓、内部人交易、L2 逐笔成交监控。

### 6.3 交互与自动化
- **自动化执行**：模拟盘对接、网格交易 Agent。
- **AI 媒体化**：双人对话播客、数字人视频简报。
- **智能 UI**：动态组件生成、自然语言控制。

### 6.4 宏观与政策
- **央行 NLP**：美联储/央行会议纪要语义微操分析。
- **新闻冲击预测**：突发新闻对股价的瞬时冲击建模。
- **跨资产联动**：黄金、原油、美债收益率前导指标监控。
